import React from 'react'
import { Link } from 'react-router';
import ButtonBarComponent from './buttonBar'
import 'stylesheets/modules/header'
import 'stylesheets/utilities/clearfix'
import 'stylesheets/modules/gallery'

class Header extends React.Component {
 constructor(props) {
   super(props);
   this.state = {
     small: (document.documentElement.clientWidth < 780) ? true : false,
     shrink: (document.documentElement.clientWidth < 780) ? true : false
   }
   this.toggleShrink = this.toggleShrink.bind(this);
 }
  
 render() {
   return (
      <div className={'header-content'}>
      <div className={((this.props.params.route === 'work' && !this.props.params.piece) && this.state.shrink) ? 'work shrink header u-clearfix' : (this.state.shrink||this.state.small) ? 'shrink header u-clearfix' : 'header u-clearfix'} style={this.getStyle()} >
        <div className={'header-content u-clearfix'}>
          <div className={'title'}>
            <Link className={'title-content'} to='/'>Zejian Shen</Link>
          </div>
          <ButtonBarComponent route={this.props.route} className={(this.state.small || this.state.shrink) ? 'buttonBar u-clearfix' : 'hidden'}  {...this.props} shrink={this.state.shrink} isHeader={true} />
          </div>
      <div className={'socialButtons'}>
        <div className={'social'} >
        <a href="https://vimeo.com/user424595"> 
        <svg
          viewBox="0 0 125 120"
          height="100%"
          id="svg_vimeo">
          <g
            transform="matrix(1.25,0,0,-1.25,0,108.3375)"
            id="g10">
            <g
              transform="scale(0.1,0.1)"
              id="g12">
              <g
                id="g14">
                <g
                  clipPath="url(#clipPath18)"
                  id="g16">
                  <path
                    id="path22"
                    style={{fillOpacity: '1', fillRule: 'nonzero', stroke: 'none'}}
                    d="M 999.512,666.16 C 995.059,568.633 927.07,435.082 795.566,265.582 659.609,88.5234 544.578,0 450.48,0 392.207,0 342.859,53.8945 302.578,161.742 275.664,260.586 248.77,359.43 221.855,458.277 c -29.921,107.786 -62.011,161.746 -96.328,161.746 -7.48,0 -33.652,-15.777 -78.4762,-47.191 L 0,633.559 c 49.3555,43.449 98.0352,86.89 145.938,130.394 65.82,56.985 115.234,86.957 148.164,89.985 77.832,7.488 125.734,-45.813 143.711,-159.907 19.421,-123.101 32.871,-199.672 40.429,-229.636 22.434,-102.133 47.11,-153.133 74.082,-153.133 20.93,0 52.364,33.125 94.285,99.363 41.875,66.254 64.309,116.672 67.336,151.293 5.965,57.18 -16.472,85.84 -67.336,85.84 -23.941,0 -48.621,-5.516 -74.011,-16.43 49.14,161.289 143.047,239.625 281.64,235.156 102.754,-3.027 151.192,-69.789 145.274,-200.324" /></g></g></g></g></svg>
          </a>
                      </div>
          <div className={'social'} > 
					<a href="https://www.instagram.com/kingsansan/">
          <svg   
						viewBox="0 0 629.79999 629.79999"
						height="100%"
						id="svg_instagram">
						  <g
							  transform="matrix(1.25,0,0,-1.25,0,629.8)"
								id="g10">
								<g
								  transform="scale(0.1,0.1)"
									id="g12">
								  <path
										id="path14"
										style={{fillOpacity: '1', fillRule: 'nonzero', stroke: 'none'}}
										d="m 2519.21,4584.5 c 672.65,0 752.33,-2.57 1017.97,-14.69 245.62,-11.2 379.01,-52.24 467.78,-86.74 117.59,-45.7 201.51,-100.29 289.66,-188.44 88.16,-88.16 142.75,-172.08 188.45,-289.67 34.5,-88.77 75.54,-222.16 86.75,-467.78 12.11,-265.64 14.68,-345.32 14.68,-1017.98 0,-672.65 -2.57,-752.33 -14.68,-1017.97 -11.21,-245.62 -52.25,-379.01 -86.75,-467.78 -45.7,-117.591 -100.29,-201.509 -188.44,-289.661 -88.16,-88.156 -172.08,-142.75 -289.67,-188.449 -88.77,-34.5 -222.16,-75.535 -467.78,-86.746 -265.61,-12.117 -345.27,-14.684 -1017.97,-14.684 -672.71,0 -752.37,2.567 -1017.98,14.684 -245.62,11.211 -379.01,52.246 -467.78,86.746 -117.591,45.699 -201.509,100.293 -289.661,188.445 -88.152,88.153 -142.75,172.074 -188.449,289.665 -34.5,88.77 -75.535,222.16 -86.742,467.78 -12.121,265.64 -14.688,345.32 -14.688,1017.97 0,672.66 2.567,752.34 14.688,1017.98 11.207,245.62 52.242,379.01 86.742,467.78 45.699,117.59 100.293,201.51 188.445,289.66 88.156,88.16 172.074,142.75 289.665,188.45 88.77,34.5 222.16,75.54 467.78,86.74 265.65,12.12 345.32,14.69 1017.98,14.69 m 0,453.91 c -684.18,0 -769.97,-2.9 -1038.67,-15.16 -268.15,-12.23 -451.27,-54.82 -611.513,-117.09 C 703.371,4841.78 562.875,4755.64 422.824,4615.59 282.773,4475.54 196.633,4335.04 132.254,4169.38 69.9766,4009.14 27.3906,3826.02 15.1563,3557.87 2.89844,3289.17 0,3203.38 0,2519.2 0,1835.03 2.89844,1749.24 15.1563,1480.54 27.3906,1212.39 69.9766,1029.27 132.254,869.027 196.633,703.371 282.773,562.875 422.824,422.824 562.875,282.773 703.371,196.633 869.027,132.254 1029.27,69.9766 1212.39,27.3906 1480.54,15.1563 1749.24,2.89453 1835.03,0 2519.21,0 c 684.17,0 769.96,2.89453 1038.66,15.1563 268.15,12.2343 451.27,54.8203 611.51,117.0977 165.66,64.379 306.16,150.519 446.21,290.57 140.05,140.051 226.19,280.543 290.57,446.203 62.27,160.243 104.86,343.363 117.09,611.513 12.26,268.7 15.16,354.49 15.16,1038.66 0,684.18 -2.9,769.97 -15.16,1038.67 -12.23,268.15 -54.82,451.27 -117.09,611.51 -64.38,165.66 -150.52,306.16 -290.57,446.21 -140.05,140.05 -280.55,226.19 -446.21,290.57 -160.24,62.27 -343.36,104.86 -611.51,117.09 -268.7,12.26 -354.49,15.16 -1038.66,15.16 l 0,0" />
                  <path
										id="path16"
										style={{fillOpacity: '1', fillRule: 'nonzero', stroke: 'none'}}
										d="m 2519.21,3812.85 c -714.46,0 -1293.65,-579.19 -1293.65,-1293.65 0,-714.46 579.19,-1293.64 1293.65,-1293.64 714.46,0 1293.64,579.18 1293.64,1293.64 0,714.46 -579.18,1293.65 -1293.64,1293.65 z m 0,-2133.38 c -463.78,0 -839.74,375.96 -839.74,839.73 0,463.78 375.96,839.74 839.74,839.74 463.77,0 839.73,-375.96 839.73,-839.74 0,-463.77 -375.96,-839.73 -839.73,-839.73" />
									<path
										id="path18"
										style={{fillOpacity: '1', fillRule: 'nonzero', stroke: 'none'}}
										d="m 4166.27,3863.96 c 0,-166.96 -135.35,-302.3 -302.31,-302.3 -166.96,0 -302.3,135.34 -302.3,302.3 0,166.96 135.34,302.31 302.3,302.31 166.96,0 302.31,-135.35 302.31,-302.31" /></g></g></svg>
										</a>
                   </div>
          <div className={'social mail'} >
					<a href="mailto:zesansan@gmail.com">	
          <svg height="100%" viewBox="75 73 100 100">
    						<g>
      						<path d="M172.053 157.967c0 4.621-3.781 8.401-8.401 8.401H86.363c-4.621 0-8.401-3.78-8.401-8.401v-57.125c0-4.621 3.78-8.401 8.401-8.401h77.288c4.62 0 8.401 3.78 8.401 8.401V157.967zM163.651 99.161H86.363c-0.893 0-1.68 0.788-1.68 1.68 0 5.986 2.993 11.184 7.718 14.912 7.036 5.513 14.071 11.079 21.055 16.645 2.783 2.258 7.823 7.088 11.499 7.088h0.053 0.052c3.676 0 8.716-4.83 11.499-7.088 6.983-5.565 14.019-11.131 21.055-16.645 3.413-2.678 7.719-8.506 7.719-12.969C165.332 101.471 165.646 99.161 163.651 99.161zM165.332 117.643c-1.104 1.26-2.311 2.415-3.623 3.465 -7.509 5.775-15.069 11.656-22.367 17.747 -3.938 3.308-8.821 7.351-14.282 7.351h-0.052 -0.053c-5.461 0-10.344-4.043-14.282-7.351 -7.298-6.091-14.859-11.972-22.367-17.747 -1.313-1.05-2.521-2.205-3.623-3.465v40.324c0 0.894 0.788 1.681 1.68 1.681h77.288c0.893 0 1.681-0.787 1.681-1.681V117.643z"/>
    						</g>
						</svg>
				 	</a>
            </div>
      	</div>
      </div>
      <ButtonBarComponent route={this.props.route} {...this.props} shrink={this.state.shrink} isHeader={false} />
      </div>
    )
 }

 componentDidMount() {
   window.addEventListener('scroll', this.toggleShrink);
 }

 componentWillUnmount() {
   window.removeEventListener('scroll', this.toggleShrink);
 }

 getStyle() {
   return {
     padding: ((window.document.body.scrollTop < 200) && (window.document.body.scrollTop > 150)) ? 200 - window.document.body.scrollTop + 'px 0 10px':(this.state.shrink) ? '0' : '50px 0 10px' 
   };
 }
  
 toggleShrink() {
    if (!this.state.small){
      const shouldShrink = window.document.body.scrollTop > 200;
      if(shouldShrink) {
        this.setState({shrink: true});
      } else {
        this.setState({shrink: false});
      }
    }
  }
}

export default Header
